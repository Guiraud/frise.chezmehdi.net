<!DOCTYPE html>
<html>
    <head>
    <title>Affaire Betharram</title>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-timeline.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-data-adapter.min.js"></script>
    <style type="text/css">
    html,
    body,
    #container {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        }
    </style>
    </head>
    <body>  
    <div id="container"></div>
    <script>
    anychart.onDocumentReady(function () {
        anychart.data.loadJsonFile('republique-pyrenees-betharram-timeline.json',   
        function (data) {
        // create timeline chart
        var chart = anychart.timeline();

        // create the main timeline datapoints
        for (var i = 0; i < data.repuPyreneesPeriods.length; i++) {    
          // create range series
            var series = chart.range([
            [
                data.repuPyreneesPeriods[i].title,
                data.repuPyreneesPeriods[i].start,
                data.repuPyreneesPeriods[i].end
            ]
            ]);
        }

        // create dataset for the top datapoints
        var EventsDataSet = anychart.data.set(data.repuPyreneesEvents);

        // map the top datapoints
        var eventsMapping = EventsDataSet.mapAs({
            x: 'date',
            value: 'title'
        });

        // create top series with moments
        var eventsMappingSeries = chart.moment(eventsMapping);

        // create dataset for the bottom datapoints
        var TimelineFactsDataset = anychart.data.set(data.TimelineFacts);

        // map the bottom dataset
        
        
        var TimelineFactsDatasetMapping = TimelineFactsDataset.mapAs({
            x: 'date',
            value: 'title'
        });
        
        var TimelineFactsSeries = chart.moment(TimelineFactsDatasetMapping);

        
        chart.scale().zoomLevels([
            [
                { unit: 'year', count: 1 },
            ],
            [
                { unit: 'month', count: 1}
            ]
        ]);
        
        // enable chart scroller
        chart.scroller().enabled(true);

        // set chart's title
        chart.title('Betharram : Chronologie de l\'affaire Carricart');
        
        /*
        // configure the x-axis to show years
        chart.xAxis().labels().format(function() {
            var date = new Date(this.value);
            return date.getFullYear();
        });
        */
        // set container id for the chart
        chart.container('container');

        // initiate chart drawing
        chart.draw();

        });
    });
    </script>
    </body>
</html>

